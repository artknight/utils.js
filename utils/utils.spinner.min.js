const SPINNER=class extends UTILS.Base{constructor(data){return super(data),_log(this.getObjectName()+" --\x3e instantiated!",this.getId(),this),_.isPlainObject(data)&&("onShow"in data&&this.addCallback("onShow",data.onShow),"onHide"in data&&this.addCallback("onHide",data.onHide),"onBeforeShow"in data&&this.addCallback("onBeforeShow",data.onBeforeShow)),this.values.spinner=(new Spinner).spin(),this.values.spinner.opts.className="spinner-orig",this.create().set({type:data.type||"small",center:!!data.center,msg:data.msg||"",color:data.color||"black",standalone:!!data.standalone,shadow:!!data.shadow,blur:data.blur}),this}getDefaults(){return{object:"utils.spinner",version:"2.0.9",opts:{},divs:{},is_shown:!1,types:{tiny:{lines:8,length:2,width:3,speed:1,radius:2,trail:50},small:{lines:9,length:3,width:2,speed:1,radius:3,trail:50},medium:{lines:10,length:6,width:3,speed:1,radius:5,trail:50},large:{lines:10,length:10,width:5,speed:1,radius:9,trail:50},x2:{lines:13,length:17,width:6,speed:1,radius:15,trail:50},x3:{lines:13,length:25,width:10,speed:1,radius:25,trail:50}},colors:{standalone:{bg:"#000",border:"1px solid #fff",spinner:"#fff",msg:"#fff",opac:.75},white:{bg:"transparent",border:"none",spinner:"#fff",msg:"#fff",opac:1},gray:{bg:"transparent",border:"none",spinner:"#999",msg:"#444",opac:1},red:{bg:"transparent",border:"none",spinner:"#d30000",msg:"#d30000",opac:1},black:{bg:"transparent",border:"none",spinner:"#000",msg:"#3a3a3a",opac:1},green:{bg:"transparent",border:"none",spinner:"#390",msg:"#390",opac:1}},$icon_success:$('<i class="mdi mdi-check spinner-mode-icon success"></i>'),$icon_error:$('<i class="mdi mdi-alert spinner-mode-icon error"></i>')}}clean(){if(this.values.spinner.stop(),this.values.$elm.remove(),this.values.blur&&this.values.$target.length){var blur_instance=this.values.$target.data("utils.blur");blur_instance&&blur_instance.hide()}return this.values.is_shown=!1,this}show(){this.fns("onBeforeShow");var blur_instance=null;if(this.values.spinner.spin(this.values.divs.$icon.get(0)),this.values.blur&&this.values.$target.length){if(!((blur_instance=this.values.$target.data("utils.blur"))instanceof BLUR)){var blur_options={target:this.values.$target,color:"white"};"object"==typeof this.values.blur&&_.assign(blur_options,this.values.blur),blur_instance=new BLUR(blur_options)}blur_instance.set({resize:this.values.$target.is("body")}).show()}if(!this.values.center&&this.values.$target.hasClass("box")?this.values.$target.find(".box-mainbody").append(this.values.$elm):this.values.$target.append(this.values.$elm),this.values.center){var target=this.values.$target[0]===$("#container")[0]||this.values.$target.is("body")?null:this.values.$target;this.values.$elm.setCenter(null,target)}return blur_instance&&this.values.$elm.css("z-index",blur_instance.getZindex()+1),this.fns("onShow"),this.values.is_shown=!0,this}hide(){return this.fns("onHide"),this.clean(),this}create(){return this.values.$elm=$('<div class="spinner cfx"></div>'),this.values.divs.$icon=$('<div class="spinner-icon"></div>'),this.values.divs.$msg=$('<div class="spinner-msg"></div>'),this.values.$elm.append(this.values.divs.$icon,this.values.divs.$msg),this}setTarget(target){return this.values.$target=target instanceof BOX?target.values.$elm:$(target),this.values.$target.data(this.getObjectName(),this),this}removeMode(){return this.values.divs.$icon.find(".spinner-mode-icon").remove(),this.values.$elm.removeClass("spinner-mode success error"),this}setMode(mode,message){switch(this.removeMode(),mode){case"processing":this.values.divs.$icon.find(".spinner-orig").show();break;case"success":this.values.divs.$icon.find(".spinner-orig").hide(),this.values.$elm.addClass("spinner-mode success"),this.values.divs.$icon.append(this.values.$icon_success);break;case"error":this.values.divs.$icon.find(".spinner-orig").hide(),this.values.$elm.addClass("spinner-mode error"),this.values.divs.$icon.append(this.values.$icon_error)}return message&&this.setMessage(message),this}setCSS(setting,color){switch(setting){case"bg":this.values.$elm.css({background:color});break;case"border":this.values.$elm.css({border:color});break;case"spinner":this.values.spinner.opts.color=color;break;case"msg":this.values.divs.$msg.css({color:color});break;case"opac":this.values.$elm.css({opacity:color})}return this}getMessage(){return this.values.divs.$msg.find("span").html()}setMessage(message){var $message=this.values.divs.$msg.find("span");return this.values.msg=message,message.length?$message.length?$message.html(message):this.values.divs.$msg.html("<span>"+this.values.msg+"</span>"):$message.length&&$message.remove(),this}set(data){if(data){for(var k in data)switch(!0){case/^target$/.test(k):this.setTarget(data[k]);break;case/^type$/.test(k):this.values.type=data[k],this.values.$elm.removeClass(_.keys(this.values.types).join(" ")),this.values.$elm.addClass(this.values.type);var spinner_w=this.values.types[this.values.type].length+this.values.types[this.values.type].width+this.values.types[this.values.type].radius;this.values.divs.$icon.css({width:2*spinner_w,height:2*spinner_w}),this.values.spinner.opts=_.extend(this.values.spinner.opts,this.values.types[this.values.type]),this.values.spinner.opts.left=this.values.spinner.opts.top=spinner_w+"px";break;case/^msg$/.test(k):this.setMessage(data[k]);break;case/^color$/.test(k):this.values.color=_.isPlainObject(data[k])?"custom":data[k];var settings="custom"==this.values.color?data[k]:this.values.colors[this.values.color];for(var j in settings)this.setCSS(j,settings[j]);break;case/^shadow$/.test(k):this.values.shadow=data[k],this.values.shadow?this.values.$elm.addClass("boxshadow"):this.values.$elm.removeClass("boxshadow");break;case/^standalone$/.test(k):this.values.standalone=data[k],this.values.standalone?(this.values.$elm.addClass("pos-fixed"),this.values.center=!0,this.set({color:"standalone"})):this.values.$elm.removeClass("pos-fixed");break;case/^blur$/.test(k):this.values.blur="object"==typeof data[k]?_.assign(this.values.blur,data[k]):!!data[k];break;case/^onShow|onHide$/.test(k):this.addCallback(k,data[k]);break;default:this.values[k]=data[k]}this.values.is_shown&&this.show()}return this}getSpinner(){return this.values.$elm}};