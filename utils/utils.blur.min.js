UTILS.Blur=class extends UTILS.Base{constructor(data={}){return super(data),_.isPlainObject(data)&&("onShow"in data&&this.addCallback("onShow",data.onShow),"onHide"in data&&this.addCallback("onHide",data.onHide)),this.set({target:data.target||null,color:data.color||"white",opac:data.opac||null,resize:!!data.resize}),this}getDefaults(){return{object:"utils.blur",version:"2.0.5",$elm:$('<div class="blur"></div>'),is_shown:!1,colors:{white:{bg:"#fff",opac:.7},black:{bg:"#000",opac:.3}},resize:!1}}clean(){return this.values.$elm.remove(),this.values.resize&&$(window).on("resize.utils.blur",this.onresize.bind(this)),this.fns("onHide"),this.values.is_shown=!1,this}show(){var _blur=this.values.$target.find(".blur").get(0);return _blur&&_blur.remove(),this.values.$target.append(this.values.$elm),this.fns("onShow"),this.values.is_shown=!0,this}hide(){return this.clean(),this}getZindex(){return parseInt(this.values.$elm.css("zIndex"))}onresize(){this.values.$elm.css({width:$(window).width(),height:$(window).height()})}setTarget(target){return target&&(super.setTarget(target),target instanceof UTILS.Box&&(this.values.$target=target.getBox()),this.values.$target.hasClass("box")&&this.values.$elm.css({zIndex:parseInt(this.values.$target.css("zIndex"))+20||20005}),this.values.$target.is("body")&&this.values.$elm.addClass("pos-fixed"),this.values.$target.addClass("blur-target")),this}set(data){if(data)for(var k in data)switch(!0){case/^target$/.test(k):this.setTarget(data[k]);break;case/color$/.test(k):this.values.color=data[k];var settings=this.values.colors[this.values.color];this.values.$elm.css({background:settings.bg,opacity:settings.opac});break;case/^opac$/.test(k):this.values.opac=data[k],_.isNumber(this.values.opac)?this.values.opac>1&&(this.values.opac=this.values.opac/100):this.values.opac=this.values.colors[this.values.color].opac,this.values.$elm.css({opacity:this.values.opac});break;case/^resize$/.test(k):data[k]&&!this.values.resize?this.values.$target.is("body")&&($(window).on("resize.utils.blur",this.onresize.bind(this)),this.values.$elm.addClass("pos-fixed"),this.values.resize=!0):!data[k]&&this.values.resize&&($(window).off("resize.utils.blur"),this.values.$elm.removeClass("pos-fixed"),this.values.resize=!1);break;case/^onShow|onHide$/.test(k):this.addCallback(k,data[k]);break;default:this.values[k]=data[k]}return this}};