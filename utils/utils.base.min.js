if(!UTILS)var UTILS={};UTILS.Base=class{constructor(data={}){return this.values={object:"utils.base",version:"0.1.9",id:UTILS.uuid(),$target:$("body"),ajax:{url:"",method:"",type:"POST",params:{}},scripts:[],fns:{},custom_methods_override:{}},_.extend(this.values,this.getDefaults(),data),"custom_methods_override"in data&&(this.values.custom_methods_override={},this.setCustomMethodsOverride(data.custom_methods_override)),"target"in data&&this.setTarget(data.target),"ajax"in data&&this.setAjaxData(data.ajax),"scripts"in data&&this.setScripts(data.scripts),"id"in data&&this.setId(data.id),this}getObjectName(){return this.values.object+" v"+this.values.version}getObjectVersion(){return this.values.version}fns(type,options={}){if(type&&type in this.values.fns){_.each(this.values.fns[type],function(callback){try{callback(this,options)}catch(e){_log(e)}}.bind(this));var event=`${this.getObjectName()}.${type.toLowerCase()}`.replace(/\./g,"-"),$target=this.getTarget();$target instanceof UTILS.Box&&($target=$target.getBox()),$target.trigger(event,options)}}addCallback(type,callback){return _.isFunction(callback)&&(_log(this.getObjectName()+" --\x3e callback added!",callback),_.includes(_.keys(this.values.fns),type)||(this.values.fns[type]=[]),!_.includes(this.values.fns[type],callback)&&this.values.fns[type].push(callback)),this}setCustomMethodsOverride(overrides){return _.isArray(overrides)||(overrides=[overrides]),_.each(overrides,override=>{"function"==typeof override.method&&(this[override.name]=override.method,this.values.custom_methods_override[override.name]=override)}),this}getId(){return this.values.id}setId(id){return this.values.id=id,this}getTarget(){return this.values.$target}setTarget(target){let object_name=this.getObjectName().split(" v")[0];return this.values.$target=target instanceof UTILS.Box?target.getMainbody():$(target),this.values.$target.data(object_name,this),this}getAjaxData(){return this.values.ajax}setAjaxData(ajax){return _.isPlainObject(ajax)&&("url"in ajax&&(this.values.ajax.url=ajax.url),"method"in ajax&&(this.values.ajax.method=ajax.method),"type"in ajax&&(this.values.ajax.type=ajax.type),"params"in ajax&&(this.values.ajax.params=ajax.params),"content_type"in ajax&&(this.values.ajax.content_type=ajax.content_type)),this}getScripts(){return this.values.scripts}setScripts(scripts){return this.values.scripts=scripts,this}loadScripts(callback){var scripts=this.getScripts();callback=_.isFunction(callback)?callback.call(this):new Function;return scripts.length?$LAB.script(scripts).wait(callback):callback(this),this}};