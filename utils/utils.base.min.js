var UTILS=UTILS||{};UTILS.Base=class{constructor(data={}){this.values={object:"utils.base",version:"0.2.2",id:UTILS.uuid(),$target:$("body"),ajax:{url:"",method:"",type:"POST",params:{}},scripts:[],fns:{},custom_methods_override:{},options:{}};let _defaults=_.cloneDeep(this.getDefaults()),_data=_.cloneDeep(data);if("options"in _defaults){var option,option_value;for([option,option_value]of Object.entries(_defaults.options))this.values.options[option]=option_value;delete _defaults.options,"options"in _data&&delete _data.options}return _.extend(this.values,_defaults,_data),"custom_methods_override"in _data&&(this.values.custom_methods_override={},this.setCustomMethodsOverride(_data.custom_methods_override)),"target"in _data&&this.setTarget(_data.target),"ajax"in _data&&this.setAjaxData(_data.ajax),"scripts"in _data&&this.setScripts(_data.scripts),"id"in _data&&this.setId(_data.id),this}getObjectName(){return this.values.object+" v"+this.values.version}getObjectVersion(){return this.values.version}fns(type,options={}){var $target;type&&type in this.values.fns&&(_.each(this.values.fns[type],function(callback){try{callback(this,options)}catch(e){_log(e)}}.bind(this)),type=(this.getObjectName()+"."+type.toLowerCase()).replace(/\./g,"-"),($target=($target=this.getTarget())instanceof UTILS.Box?$target.getBox():$target).trigger(type,options))}addCallback(type,callback){return _.isFunction(callback)&&(_.includes(_.keys(this.values.fns),type)||(this.values.fns[type]=[]),_.includes(this.values.fns[type],callback)||this.values.fns[type].push(callback)),this}setCustomMethodsOverride(overrides){return _.isArray(overrides)||(overrides=[overrides]),_.each(overrides,override=>{"function"==typeof override.method&&(this[override.name]=override.method,this.values.custom_methods_override[override.name]=override)}),this}getId(){return this.values.id}setId(id){return this.values.id=id,this}getTarget(){return this.values.$target}setTarget(target){var object_name=this.getObjectName().split(" v")[0].replace(/\[(.*)$/,"");return this.values.$target=target instanceof UTILS.Box?target.getMainbody():$(target),this.values.$target.data(object_name,this),this}getAjaxData(){return this.values.ajax}setAjaxData(ajax){return _.isPlainObject(ajax)&&("url"in ajax&&(this.values.ajax.url=ajax.url),"method"in ajax&&(this.values.ajax.method=ajax.method),"type"in ajax&&(this.values.ajax.type=ajax.type),"params"in ajax&&(this.values.ajax.params=ajax.params),"content_type"in ajax&&(this.values.ajax.content_type=ajax.content_type)),this}};