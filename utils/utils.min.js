_.mixin({isWindow:function(obj){return null!=obj&&obj===obj.window},createArray:function(){return _.flatten(_.toArray(arguments))},forceArray:function(arr1){if(_.isArray(arr1))return arr1;for(var arr2=[],i=0;i<arr1.length;i++)arr2.push(arr1[i]);return arr2},joinArray:function(list,delim){try{return list.join(delim)}catch(e){var r=list[0]||"";return _.each(list,function(elm){r+=delim+elm},1),r+""}},isIn:function(arr,elm,greedy){if(greedy)return-1!=_.indexOf(arr,elm);for(var i=0;i<arr.length;i++)if(elm==arr[i])return!0;return!1},compare:function(arr1,arr2){return!_.difference(arr1,arr2).length}}),$.extend($.fn,{isValidCreditCard:function(){var number=$(this).val().replace(/\s+/g,"");number=number.split("").reverse().join("");for(var digits="",i=0;i<number.length;i++)digits+=""+(i%2?2*number.charAt(i):number.charAt(i));var sum=0;for(i=0;i<digits.length;i++)sum+=1*digits.charAt(i);return!(sum%10)},isValidEmail:function(){return!!$(this).val().match(UTILS.values.regex.email)},isValidPhone:function(){return 10==$(this).val().replace(/[^0-9]/g,"").length},isValidPassword:function(){return!!$(this).val().match(UTILS.values.regex.pwd)},isValidDate:function(){return moment($(this).val()).isValid()},setPhone:function(){return this.each(function(){var $input=$(this);$input.on("keyup",function(event){$input.val(UTILS.format.phone($input.val()))})})},setMask:function(mask){return this.each(function(){var $input=$(this);"destroy"==format?$input.off("keyup blur"):$input.on("keyup blur",function(event){$input.val(UTILS.format.mask($input.val(),mask))})})},setMailCheck:function(){return this.each(function(){var $input=$(this),$hint=$('<div class="email-hint text-muted" style="display:none;">Did you mean <span class="email-suggestion"><span class="email-address"></span>@<a href="javascript:;" class="email-domain text-danger text-bold"></a></span> ?</div>');$input.after($hint),$input.on("blur",function(event){$input.mailcheck({suggested:function(element,suggestion){$hint.find(".email-address").html(suggestion.address),$hint.find(".email-domain").html(suggestion.domain),$hint.velocity("fadeIn",{duration:150})}})}),$hint.find(".email-domain").on("click",function(event){event.preventDefault(),$input.val($(this).parent().text()),$hint.velocity("fadeOut",{duration:200})})})},allowTabbing:function(){var keysAllowed={TAB:9};return this.each(function(){$(this).on("keydown",function(event){var charKey=UTILS.events.getCharKey(event);if(!_.isIn(_.values(keysAllowed),charKey)){event.preventDefault();var startPos=this.selectionStart,endPos=this.selectionEnd,scrollTop=this.scrollTop;this.value=this.value.substring(0,startPos)+"\t"+this.value.substring(endPos,this.value.length),this.focus(),this.selectionStart=startPos+"\t".length,this.selectionEnd=startPos+"\t".length,this.scrollTop=scrollTop}})})},capitalize:function(scope){return this.each(function(){var $input=$(this);$input.on("keyup",function(event){$input.val(UTILS.format.capitalize($input.val()),scope)})})},limitByCount:function(options){var splitter={word:" ",char:""}[(options=$.extend({limit:100,counterDiv:null,splitBy:"word"},options)).splitBy];return this.each(function(){var text,wordcount,limited,$textarea=$(this);options.counterDiv||(options.counterDiv=$('<p class="help-block text-right margin-t0 margin-b6"></p>'),$textarea.after(options.counterDiv)),options.counterDiv&&$(options.counterDiv).html("Max. "+options.limit+" "+options.splitBy+"s");var checkWords=function(){text=$textarea.val(),(wordcount=text.length?$.trim(text).split(splitter).length:0)>=options.limit?(options.counterDiv&&$(options.counterDiv).html("0 "+options.splitBy+"s left"),limited=(limited=$.trim(text).split(splitter,options.limit)).join(splitter),$textarea.val(limited)):options.counterDiv&&$(options.counterDiv).html(options.limit-wordcount+" "+options.splitBy+"s left")};$textarea.val().length&&checkWords(),$textarea.keyup(function(event){event.preventDefault(),checkWords()})})},setCenter:function(offset,parent){return this.each(function(){var $elm=$(this),$parent=_.isObject(parent)?$(parent):null,offset=offset&&_.isPlainObject(offset)?offset:{x:0,y:0};if(!$elm.parent().hasClass("box-scrollable")){!$elm.attr("class").match(/pos-fixed|pos-absolute/g)&&$elm.addClass("pos-absolute");var data={left:null!=$parent?$parent.outerWidth()/2:$(window).width()+$(window).scrollLeft()-$(window).width()/2,top:null!=$parent?$parent.outerHeight()/2:$(window).height()+$(window).scrollTop()-$(window).height()/2};$elm.hasClass("pos-fixed")&&(data.left=$(window).width()/2,data.top=$(window).height()/2),data.left-=$elm.outerWidth()/2+offset.x,data.top-=$elm.outerHeight()/2+offset.y,$elm.css(data)}})},ignore:function(sel){return this.clone().find(sel).remove().end()},nextNodeByClass:function(className){var $node=this;if(className){className="."+className.replace(/\./g,"");var $all=$(className);$node=$all.eq($all.index($node)+1)}return $node},prevNodeByClass:function(className){var $node=this;if(className){className="."+className.replace(/\./g,"");var $all=$(className),index=Math.abs($all.index($node))-1;$node=index>=0?$all.eq(index):$([])}return $node}}),$.extend($.expr[":"],{regex:function(elem,index,match){var matchParams=match[3].split(","),validLabels=/^(data|css):/,attr={method:matchParams[0].match(validLabels)?matchParams[0].split(":")[0]:"attr",property:matchParams.shift().replace(validLabels,"")};return new RegExp(matchParams.join("").replace(/^\s+|\s+$/g,""),"ig").test(jQuery(elem)[attr.method](attr.property))}});var UTILS={values:{numbers:"1234567890",letters:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",special:" .,-!@#$%&()?/\":;'",url:"?/-_.#,%&()+=!@*$:;",regex:{text:/^([a-zA-Z]+)$/,email:/^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/,url:/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/,ip:/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,pwd:/^((?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,16})$/}},isRetina:function(){return window.devicePixelRatio>1||window.matchMedia&&window.matchMedia("(-webkit-min-device-pixel-ratio: 1.5),(-moz-min-device-pixel-ratio: 1.5),(min-device-pixel-ratio: 1.5)").matches},isMobile:function(){return bowser.mobile||bowser.tablet},format:{string:function(action,str){return/^e/.test(action)?str.replace(/[\n]/g,"~1").replace(/[\r]/g,"~2").replace(/[&]/g,"~3").replace(/[\>]/g,"~4").replace(/[\<]/g,"~5").replace(/["]/g,"~6").replace(/[,]/g,"~7").replace(/[']/g,"~8").replace(/[%]/g,"~9"):str.replace(/~1/g,"\n").replace(/~2/g,"\r").replace(/~3/g,"&").replace(/~4/g,">").replace(/~5/g,"<").replace(/~6/g,'"').replace(/~7/g,",").replace(/~8/g,"'").replace(/~9/g,"%")},phone:function(phone){return UTILS.format.mask(phone,"(000) 000-0000 S00000")},mask:function(str,mask){if(mask)try{str=new StringMask(mask).apply(str)}catch(e){}return _.trim(str)},commafy:function(str){return str.replace(/^(-?\d+)(\d{3}(\.\d+)?)$/,function(_,a,b){return UTILS.format.commafy(a)+","+b})},toBoolean:function(val){return/y|yes|true|on|1/i.test(val)},currency:function(num,sign){return(sign||"")+""+num.toFixed(2).replace(/(\d)(?=(\d{3})+\b)/g,"$1,")},shorten:function(str,limit,ending){return str.length>limit?str.substring(0,limit)+(ending||"..."):str},capitalize:function(str,scope){return"one"==(scope=scope||"all")?str.toLowerCase().replace(/\b[a-z]/,function(match){return match.toUpperCase()}):str.toLowerCase().replace(/\b[a-z]/g,function(match){return match.toUpperCase()})},filterOutHTML:function(html,tags_to_ignore){var _html=html,_tags_to_ignore=(tags_to_ignore=tags_to_ignore||"b,p,i,u,strike,br").split(",");for(i=0;i<_tags_to_ignore.length;i++)_html=(_html=_html.replace(new RegExp("<"+_tags_to_ignore[i]+"*?>","gi"),"["+_tags_to_ignore[i]+"]")).replace(new RegExp("</"+_tags_to_ignore[i]+"*?>","gi"),"[/"+_tags_to_ignore[i]+"]");for(_html=_html.replace(/<(.|\n)*?>/gi,""),i=0;i<_tags_to_ignore.length;i++)_html=(_html=_html.replace(new RegExp("\\["+_tags_to_ignore[i]+"*?\\]","gi"),"<"+_tags_to_ignore[i]+">")).replace(new RegExp("\\[/"+_tags_to_ignore[i]+"*?\\]","gi"),"</"+_tags_to_ignore[i]+">");return _html},urlEncode:function(str){return encodeURIComponent(str.toString())},urlDecode:function(str){return decodeURIComponent(str.toString())},idify:function(item_id){return item_id.length?parseFloat(item_id):0}},getCharKey:function(event){return event?event.charCode?event.charCode:event.keyCode?event.keyCode:event.which?event.which:0:0},uuid:function(){var s4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return s4()+"-"+s4()},asc:function(_char){return _char.charCodeAt(0)},chr:function(_charcode){return String.fromCharCode(_charcode)},dim:{values:{$elm:null},show:function(callback,options){var defaults={target:$("body"),color:"black",opac:.3,resize:!0,onShow:callback||null};options=_.extend(defaults,options||{});UTILS.dim.values.$elm=new BLUR(options),$("body").addClass("overflow global-dimmer"),UTILS.dim.values.$elm.show()},hide:function(){UTILS.dim.values.$elm.hide(),UTILS.dim.values.elm=null,$("body").removeClass("overflow global-dimmer")}},file:{ext:function(filename){return/[.]/.exec(filename)?/[^.]+$/.exec(filename):[]},check:function(file,type){type=type||"img";return _.isIn({img:["jpg","png","bmp","gif","tiff"],doc:["doc","rtf","txt","xls","zip"],vid:["mpeg","mpg","wmv","avi","rm","mp4","mov","fla","swf","flv","f4v"],font:["ttf","otf"]}[type],file.fileExtension().join().toLowerCase())}},fn:{bind:function(fn,scope){fn.targetScope=scope;return function(func,args){args=_.createArray(args);var scope=func.targetScope||window;return function(){try{var _args=_.forceArray(arguments).concat(args);return func.apply(scope,_args)}catch(e){}}}(fn,arguments.length>2?_.forceArray(arguments).slice(2):null)},bindMethods:function(scope){for(var k in scope){var func=scope[k];"function"==typeof func&&(scope[k]=UTILS.fn.bind(func,scope))}},interval:function(fn,interval){var args=slice.call(arguments,2);return setTimeout(function(){return fn.apply(null,args)},interval)},clear:function(timer){return clearTimeout(timer),clearInterval(timer),null}},isDefined:function(obj){return!_.isUndefined(obj)&&!_.isNull(obj)},getURLParams:function(){for(var match,params={},pl=/\+/g,search=/([^&=]+)=?([^&]*)/g,decode=function(s){return decodeURIComponent(s.replace(pl," "))},query=window.location.search.substring(1);match=search.exec(query);)params[decode(match[1])]=decode(match[2]);return params},addParamToURL(url="",params=[]){for(let param of params)url+=(url.split("?")[1]?"&":"?")+param;return url},cookie:{create:function(name,value,days){if(days){var date=new Date;date.setTime(date.getTime()+24*days*60*60*1e3);var expires="; expires="+date.toGMTString()}else expires="";document.cookie=name+"="+value+expires+"; path=/"},read:function(name){for(var nameEQ=name+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1,c.length);if(0==c.indexOf(nameEQ))return c.substring(nameEQ.length,c.length)}return null},erase:function(name){UTILS.cookie.create(name,"",-1)}},log:function(){if(APP.showLog()){var now=new Date,timestamp=now.getHours()+":"+now.getMinutes()+":"+now.getSeconds(),args=[].slice.call(arguments);args.length&&(_log.history=_log.history||[],_log.history.push(args),this.console&&(console.log(timestamp.toString(),args.shift().toString(),args),arguments[0].stack&&console.error(arguments[0].stack)))}},fetch:function(url="",opts={}){url=url;var options={method:"GET",headers:new Headers({"X-Requested-With":"XMLHttpRequest"}),credentials:"same-origin"};return"method"in opts&&/^POST$/.test(opts.method)?(options.method="POST",options.headers.append("Content-Type","content_type"in opts?opts.content_type:"application/x-www-form-urlencoded;charset=UTF-8"),options.body=new URLSearchParams(opts.data||{})):/^GET/.test(options.method)&&"data"in opts&&(url=UTILS.addParamToURL(url,_.map(opts.data,function(value,key){return key+"="+UTILS.format.urlEncode(value)}))),fetch(url,options).then(response=>response.text())}};if(!Array.prototype.first&&(Array.prototype.first=function(){return this[0]}),!Array.prototype.last&&(Array.prototype.last=function(){return this.slice(-1)[0]}),!Array.prototype.min&&(Array.prototype.min=function(){return _.min(this)}),!Array.prototype.max&&(Array.prototype.max=function(){return _.max(this)}),!Array.prototype.index&&(Array.prototype.index=function(elm){return _.indexOf(this,elm)}),!Array.prototype.flatten&&(Array.prototype.flatten=function(){return _.flatten(this)}),!Array.prototype.diff&&(Array.prototype.diff=function(array){return _.difference(this,array)}),!Array.prototype.isIn&&(Array.prototype.isIn=function(elm){return _.isIn(this,elm)}),!Array.prototype.intersect&&(Array.prototype.intersect=function(arr){return _.intersection(this,arr)}),!Array.prototype.compare&&(Array.prototype.compare=function(arr){return _.compareArray(this,arr)}),!Array.prototype.prepend&&(Array.prototype.prepend=function(elm){return this.unshift(elm)}),!Function.prototype.delay&&(Function.prototype.delay=function(interval,args){return _.delay(this,interval,args)}),!Function.prototype.interval&&(Function.prototype.interval=function(interval,args){return UTILS.fn.interval(this,interval,args)}),!Function.prototype.bind&&(Function.prototype.bind=function(scope,args){return UTILS.fn.bind(this,scope,args)}),!jQuery.fetch&&(jQuery.fetch=UTILS.fetch),!String.prototype.strEncode&&(String.prototype.strEncode=function(){return UTILS.format.string("encode",this)}),!String.prototype.strDecode&&(String.prototype.strDecode=function(){return UTILS.format.string("decode",this)}),!String.prototype.urlEncode&&(String.prototype.urlEncode=function(){return UTILS.format.urlEncode(this)}),!String.prototype.urlDecode&&(String.prototype.urlDecode=function(){return UTILS.format.urlDecode(this)}),!String.prototype.sha1Encode&&(String.prototype.sha1Encode=function(){return ENC.sha1(this)}),!String.prototype.base64Encode&&(String.prototype.base64Encode=function(){return ENC.base64.encode(this)}),!String.prototype.base64Decode&&(String.prototype.base64Decode=function(){return ENC.base64.decode(this)}),!String.prototype.fileExtension&&(String.prototype.fileExtension=function(){return UTILS.file.ext(this)}),!String.prototype.capitalize&&(String.prototype.capitalize=function(scope){return UTILS.format.capitalize(this,scope)}),!String.prototype.idify&&(String.prototype.idify=Number.prototype.idify=function(){return UTILS.format.idify(this)}),!String.prototype.shorten&&(String.prototype.shorten=function(limit,ending){return UTILS.format.shorten(this,limit,ending)}),function(){var old_parseInt=parseInt;parseInt=function(number,radix){return old_parseInt(number,radix||10)}}(),window.toBoolean=UTILS.format.toBoolean,window._log=UTILS.log,function(){"use strict";if(navigator.userAgent.match(/IEMobile\/10\.0/)){var msViewportStyle=document.createElement("style");msViewportStyle.appendChild(document.createTextNode("@-ms-viewport{width:auto!important}")),document.querySelector("head").appendChild(msViewportStyle)}}(),"undefined"!=typeof Mailcheck){var mailcheck_domains=["aol.com","att.net","comcast.net","facebook.com","gmail.com","gmx.com","googlemail.com","google.com","hotmail.com","hotmail.co.uk","mac.com","me.com","mail.com","msn.com","live.com","sbcglobal.net","verizon.net","yahoo.com","yahoo.co.uk","email.com","games.com","gmx.net","hush.com","hushmail.com","inbox.com","lavabit.com","love.com","pobox.com","rocketmail.com","safe-mail.net","wow.com","ygm.com","ymail.com","zoho.com","fastmail.fm","bellsouth.net","charter.net","cox.net","earthlink.net","juno.com","btinternet.com","virginmedia.com","blueyonder.co.uk","freeserve.co.uk","live.co.uk","ntlworld.com","o2.co.uk","orange.net","sky.com","talktalk.co.uk","tiscali.co.uk","virgin.net","wanadoo.co.uk","bt.com","sina.com","qq.com","naver.com","hanmail.net","daum.net","nate.com","yahoo.co.jp","yahoo.co.kr","yahoo.co.id","yahoo.co.in","yahoo.com.sg","yahoo.com.ph","hotmail.fr","live.fr","laposte.net","yahoo.fr","wanadoo.fr","orange.fr","gmx.fr","sfr.fr","neuf.fr","free.fr","gmx.de","hotmail.de","live.de","online.de","t-online.de","web.de","yahoo.de","hotmail.be","live.be","skynet.be","voo.be","tvcablenet.be","hotmail.com.ar","live.com.ar","yahoo.com.ar","fibertel.com.ar","speedy.com.ar","arnet.com.ar","hotmail.com","gmail.com","yahoo.com.mx","live.com.mx","yahoo.com","hotmail.es","live.com","hotmail.com.mx","prodigy.net.mx","msn.com"];Mailcheck.run({domains:mailcheck_domains,distanceFunction:function(s1,s2){if(!s1||!s1.length)return s2?s2.length:0;if(!s2||!s2.length)return s1.length;for(var l1=s1.length,l2=s2.length,c1=0,c2=0,lcss=0,local_cs=0;c1<l1&&c2<l2;){if(s1.charAt(c1)==s2.charAt(c2))local_cs++;else{lcss+=local_cs,local_cs=0,c1!=c2&&(c1=c2=Math.max(c1,c2));for(var i=0;i<5;i++){if(c1+i<l1&&s1.charAt(c1+i)==s2.charAt(c2)){c1+=i,local_cs++;break}if(c2+i<l2&&s1.charAt(c1)==s2.charAt(c2+i)){c2+=i,local_cs++;break}}}c1++,c2++}return lcss+=local_cs,Math.round(Math.max(l1,l2)-lcss)}})}